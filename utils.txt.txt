utitlity functions for version 3